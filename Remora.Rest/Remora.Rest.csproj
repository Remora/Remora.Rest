<Project Sdk="Remora.Sdk">
    <PropertyGroup>
        <VersionPrefix>3.2.1</VersionPrefix>
        <Description>Core functionality of basic REST-focused API tooling, allowing you to easily build new wrappers around your favourite services.</Description>
        <PackageReleaseNotes>
            Fix broken handling of default values for value types.
        </PackageReleaseNotes>
    </PropertyGroup>

    <PropertyGroup>
        <IsAotCompatible>true</IsAotCompatible>
        <IsTrimmable>true</IsTrimmable>
        <EnableTrimAnalyzer>true</EnableTrimAnalyzer>
        <EnableSingleFileAnalyzer>true</EnableSingleFileAnalyzer>
        <EnableAotAnalyzer>true</EnableAotAnalyzer>
    </PropertyGroup>

    <ItemGroup>
        <PackageReference Include="JsonDocumentPath" />
        <PackageReference Include="Microsoft.Extensions.Http" />
        <PackageReference Include="OneOf" />
        <PackageReference Include="Remora.Results" />
        <PackageReference Include="System.Text.Json" />
        <PackageReference Include="PolyKit" />
    </ItemGroup>

    <ItemGroup>
        <AssemblyAttribute Include="System.Runtime.CompilerServices.InternalsVisibleToAttribute">
            <_Parameter1>Remora.Rest.Tests</_Parameter1>
        </AssemblyAttribute>
    </ItemGroup>

    <ItemGroup>
      <ProjectReference Include="..\Remora.Rest.Core\Remora.Rest.Core.csproj" />
    </ItemGroup>

    <ItemGroup>
        <ProjectReference Include="..\Remora.Rest.Generators\Remora.Rest.Generators.csproj" Pack="false">
            <ReferenceOutputAssembly>false</ReferenceOutputAssembly>
            <OutputItemType>Content</OutputItemType>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </ProjectReference>
    </ItemGroup>

    <ItemGroup>
        <!-- Package the generator in the analyzer directory of the nuget package -->
        <None Include="$(OutputPath)\Remora.Rest.Generators.dll" Pack="true" PackagePath="analyzers/dotnet/cs" Visible="false" />
    </ItemGroup>


</Project>
